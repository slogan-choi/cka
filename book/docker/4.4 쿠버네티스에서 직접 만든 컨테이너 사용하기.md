# 쿠버네티스에서 직접 만든 컨테이너 사용하기
쿠버네티스에서 이미지를 사용하려면 쿠버네티스가 이미지를 불러올 수 있는 공간에 이미지를 넣어 두어야 한다.

## ✅ 쿠버네티스에서 도커 이미지 구동하기
쿠버네티스는 컨테이너를 효과적으로 다루기 위해서 만들어졌고 컨테이너인 파드도 쉽게 부를 수 있다. 따라서 직접 만든 컨테이너 이미지도 kubectl 명령으로 쿠버네티스 클러스터에서 바로 구동할 수 있다.

```shell
# m-k8s at super putty
docker images multistage-img
kubectl create deployment failure1 --image=multistage-img
kubectl get pods -w
kubectl create deployment failure2 --dry-run-client -o yaml \
--image=multistage-img > failure2.yaml
vi failure2.yaml
kubectl apply -f failure2.yaml
kubectl get pods
kubectl delete deployment failure1
kubectl delete deployment failure2
curl -O \
https://raw.githubusercontent.com/sysnet4admin/_Book_k8sInfra/main/ch4/4.3.4/Dockerfile
docker build -t multistage-img .
cp failure2.yaml success1.yaml
sed -i 's/replicas: 1/replicas: 3/' success1.yaml
sed -i 's/failure2/success1/' success1.yaml
kubectl apply -f success1.yaml
kubectl get pods -o wide
kubectl delete -f success1.yaml
docker rmi multistage-img
docker rmi $(docker images -f dangling=true -q)
```
```yaml
# failure2.yaml
    spec:
      containers:
      - image: multistage-img
        imagePullPolicy: Never # 추가한 부분
        name: multistage-img
        resource: {}
status: {}
```
## ✅ 레지스트리 구성하기
## ✅ 직접 만든 이미지로 컨테이너 구동하기
